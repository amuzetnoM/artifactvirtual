<div class="editor-container">
  <div class="toolbar">
    <div class="compiler-options">
      <div class="option-group">
        <label>Compiler Version:</label>
        <select [(ngModel)]="compilerVersion">
          <option value="0.8.19">0.8.19</option>
          <option value="0.8.18">0.8.18</option>
          <option value="0.8.17">0.8.17</option>
          <option value="0.8.16">0.8.16</option>
          <option value="0.8.15">0.8.15</option>
        </select>
      </div>
      
      <div class="option-group">
        <label>EVM Version:</label>
        <select [(ngModel)]="evmVersion">
          <option value="paris">Paris</option>
          <option value="london">London</option>
          <option value="berlin">Berlin</option>
          <option value="istanbul">Istanbul</option>
        </select>
      </div>
      
      <div class="option-group optimization">
        <label>
          <input type="checkbox" [(ngModel)]="optimizationEnabled">
          Enable optimization
        </label>
      </div>
    </div>
    
    <div class="action-buttons">
      <button (click)="compileContract()" [disabled]="isCompiling" class="compile-btn">
        <span *ngIf="!isCompiling">Compile</span>
        <span *ngIf="isCompiling">Compiling...</span>
      </button>
      <button (click)="toggleAIAssistant()" class="ai-btn">
        {{ aiAssistantVisible ? 'Hide AI Assistant' : 'Show AI Assistant' }}
      </button>
    </div>
  </div>
  
  <div class="main-content">
    <div class="editor-actions">
      <span class="file-info" *ngIf="activeFile">{{ activeFile.name }} ({{ activeFile.language }})</span>
      <div class="action-buttons">
        <button mat-button (click)="saveActiveFile()" [disabled]="!activeFile">
          <mat-icon>save</mat-icon>
          Save
        </button>
        <button mat-button (click)="compileActiveFile()" [disabled]="!activeFile || isCompiling">
          <mat-icon>build</mat-icon>
          {{ isCompiling ? 'Compiling...' : 'Compile' }}
        </button>
        <button mat-button (click)="toggleAiAssistant()">
          <mat-icon>{{ showAiAssistant ? 'visibility_off' : 'visibility' }}</mat-icon>
          {{ showAiAssistant ? 'Hide AI' : 'Show AI' }}
        </button>
      </div>
    </div>
    
    <div class="editor-workspace" [class.with-assistant]="showAiAssistant">
      <div class="monaco-container" #editorContainer></div>
      
      <app-ai-assistant 
        *ngIf="showAiAssistant"
        class="ai-assistant-panel"
        [language]="activeFile?.language || 'solidity'"
        [currentCode]="activeFile?.content || ''"
        [activeFile]="activeFile?.name || ''"
        (insertCode)="insertCodeAtCursor($event)"
        (replaceCode)="replaceEditorContent($event)"
      ></app-ai-assistant>
    </div>
    
    <div class="output-panel" *ngIf="compileOutput">
      <div class="panel-header">
        <h3>Compilation Output</h3>
        <button mat-icon-button (click)="compileOutput = ''">
          <mat-icon>close</mat-icon>
        </button>
      </div>
      <div class="output-content">
        <pre>{{ compileOutput }}</pre>
      </div>
    </div>
    
    <div class="compilation-output" *ngIf="compilationOutput">
      <app-compilation-output 
        [compilationResult]="compilationResult"
        [output]="compilationOutput"
        (clearOutput)="clearCompilationOutput()">
      </app-compilation-output>
    </div>
    
    <div class="ai-assistant-container" *ngIf="aiAssistantVisible">
      <!-- AI Assistant component will be added later -->
      <div class="ai-assistant-placeholder">
        <h3>AI Assistant</h3>
        <p>AI Assistant will be added in a future update.</p>
      </div>
    </div>
  </div>
</div>